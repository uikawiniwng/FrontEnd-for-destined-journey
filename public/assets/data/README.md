# 数据录入指南

本目录用于录入预设的装备、道具、技能、命定之人和初始剧情数据，使用 JSON5 格式（支持注释的 JSON），方便不懂代码的人员维护。

文件会通过 CDN 加载，页面会自动带时间戳绕过缓存。

## 文件结构

```
public/assets/data/
├── README.md          # 本说明文档
├── baseInfo.json      # 基础信息数据（性别、种族、身份、初始地点）
├── equipments.json    # 装备数据
├── items.json         # 道具数据
├── skills.json        # 技能数据
├── destinedOnes.json  # 命定之人数据
├── backgrounds.json   # 初始剧情数据
└── coreClassification.json # 核心分类数据（排行榜/分组）
```

## JSON5 特性

本项目使用 JSON5 格式，支持以下特性：

1. 支持注释

   ```json5
   {
     // 这是单行注释
     "name": "物品名称",
     /* 这是多行注释
        可以写很多行 */
     "cost": 10
   }
   ```

2. 允许尾随逗号

   ```json5
   {
     "name": "物品名称",
     "cost": 10,  // 最后一个属性后可以有逗号
   }
   ```

3. 更灵活的字符串
   - 可以使用单引号
   - 支持多行字符串

## 快速开始

1. 直接编辑数据文件
   - 打开 `baseInfo.json`、`equipments.json`、`items.json`、`skills.json`、`destinedOnes.json`、`backgrounds.json`
   - 按照格式添加或修改数据
   - 可以自由添加注释来说明数据用途

2. 提交到仓库
   - 将修改提交到 GitHub 仓库的 `public/assets/data/` 目录
   - CDN 会自动同步最新的数据文件

## 重要提示

- 可以随意添加注释：`//` 或 `/* */`
- 尾随逗号无所谓：最后一个属性后可以有逗号
- 什么文件写什么数据：
  - `baseInfo.json` - 基础信息数据（性别、种族、身份、初始地点）
  - `equipments.json` - 装备数据
  - `items.json` - 道具数据
  - `skills.json` - 技能数据
  - `destinedOnes.json` - 命定之人数据
  - `backgrounds.json` - 初始剧情数据
  - `coreClassification.json` - 核心分类数据（排行榜/分组）

## 数据格式说明

### 品质等级 (rarity)

数据中的 rarity 字段表示品质等级，可选值有：

- `common` - 普通
- `uncommon` - 优良
- `rare` - 稀有
- `epic` - 史诗
- `legendary` - 传说
- `mythic` - 神话
- `only` - 唯一

**注意：该字段需要填写对应的英文而非中文。**

### 装备数据 (equipments.json)

```json5
{
  // 装备按分类组织
  "武器": [
    {
      "name": "长剑",  // 装备名称
      "cost": 10,      // 转生点消耗
      "type": "武器",  // 装备类型
      "rarity": "common",  // 品质等级
      "tag": ["单手剑", "攻击: 50", "力量+2"],  // 标签数组：[子类型, 攻击/防御: XXX, 属性+1/2]
      "effect": {  // 效果对象：键为效果名称，值为效果描述
        "攻击强化": "造成额外10点物理伤害",
        "力量加成": "力量属性+2"
      },
      "description": "(装备的叙事性描述)",
    },
    // 可以继续添加更多装备...
  ],
  "防具": [
    // 防具数据...
  ],
}
```

### 道具数据 (items.json)

```json5
{
  // 道具按分类组织
  "消耗品": [
    {
      "name": "治疗药水",  // 道具名称
      "cost": 5,           // 转生点消耗
      "type": "消耗品",    // 道具类型
      "rarity": "uncommon", // 品质等级
      "quantity": 1,        // 道具数量（默认为1）
      "tag": ["恢复", "HP+50"],  // 标签数组（非必填）
      "effect": {  // 效果对象：键为效果名称，值为效果描述
        "生命恢复": "恢复50点生命值"
      },
      "description": "(道具的叙事性描述)",
    },
  ],
}
```

### 技能数据 (skills.json)

skills.json 只有一种结构：最外层是“分类”，分类下是数组。没有“主动/被动”的双层结构。

```json5
{
  "战技": [
    {
      "name": "强力斩击",  // 技能名称
      "cost": 15,          // 转生点消耗
      "type": "主动",      // 技能类型
      "rarity": "rare",    // 品质等级
      "tag": ["力量", "单体", "物理攻击", "威力: 150", "破甲"],  // 标签数组：[关联属性, 目标类型, 核心功能, 威力: XXX, 可选机制]
      "consume": "[攻击: 50SP]",  // 消耗说明
      "effect": {  // 效果对象：键为效果名称，值为效果描述
        "强力斩击": "造成150点伤害，70%物理伤害，30%能量伤害",
        "破甲效果": "无视目标20%护甲"
      },
      "description": "(叙事性描述)",
    },
  ],
  // 其他分类：法术、祷告、其它...
}
```

### 基础信息数据 (baseInfo.json)

```json5
{
  // 性别选项
  "genders": ["男", "女", "雌性", "雄性"],

  // 种族消耗点数（正数扣点，负数加点）
  "raceCosts": {
    "地精": -10,
    "人类": 0,
    "兽族": 0,
    "翼民": 10,
    // 更多种族...
  },

  // 身份消耗点数
  "identityCosts": {
    "沦为奴隶": -20,
    "自由平民": 0,
    "贵族阶级": 40,
    // 更多身份...
  },

  // 初始地点
  "startLocations": [
    "大陆东南部区域-索伦蒂斯王国",
    "大陆东北部区域-诺斯加德联盟",
    // 更多地点...
  ]
}
```

注意：`baseInfo.json` 中的 `genders`、`raceCosts`、`identityCosts`、`startLocations` 会自动追加"自定义"选项，无需手动添加。

### 初始剧情数据 (backgrounds.json)

```json5
{
  "通用开局": [  // 初始剧情分类
    {
      "name": "（初始剧情标题）",  // 为初始剧情起个标题好进行区分
      "description": "（初始剧情的一个简要描述）",
      "requiredRace": "(种族)",  // （可选）初始剧情需要什么种族才能进行选择
      "requiredLocation": "(初始地点)",  //（可选) 初始剧情需要什么起始地点才能进行选择，对应上面的 startLocations 字段
      "requiredIdentity": "(身份)",  // （可选）初始剧情需要什么身份才能进行选择
    }
  ]
}
```

### 初始命定之人数据 (destinedOnes.json)

```json5
{
  "第七层级": [  // 初始命定之人分类（默认以层级分类）
    {
      "name": "索拉莉娅",  // 命定之人姓名
      "cost": 9999,        // 转生点消耗
      "lifeLevel": "第七层级/神祗",  // 命定之人的生命层级
      "level": 25,                   // 命定之人的等级
      "race": "神祗",                // 命定之人的种族
      "identity": ["辉煌女神"],      // 命定之人的身份（数组）
      "career": ["秩序守护者"],      // 命定之人的职业（数组）
      "personality": "威严, 仁慈, 绝对的秩序与纯洁, 对黑暗毫不妥协",  // 命定之人的性格
      "like": "秩序, 纯洁的灵魂, 翼民的虔诚",                         // 命定之人的喜好
      "app": "金色长发，眼瞳宛如熔金。背后伸展着十二片覆盖天穹的纯白羽翼，耳后的头翅闪烁着神圣的光辉",  // 命定之人的外貌
      "cloth": "身着一体式贴身金色神甲，线条优雅而神圣，手持一柄光芒构成的长枪与一本厚重的法典",        // 命定之人的衣物装饰
      "equip": [  // 命定之人的装备(格式参考装备数据，但没有 cost 字段)
        {
          "name": "黎明圣裁",
          "type": "武器",
          "rarity": "mythic",
          "tag": ["长枪", "攻击: 1200", "精神+2"],  // 标签数组
          "effect": {  // 效果对象
            "斩杀效果": "源于微弱的【秩序法则】。持有者发动的任何攻击，若目标生命值低于25%，则必定触发斩杀效果，造成等同于目标25%最大生命值的额外真实伤害"
          },
          "description": "破晓的第一缕光铸成的神枪，是终结一切黑暗与混沌的审判之矛"
        },
        // 更多装备...
      ],
      "attributes": {  // 命定之人的属性
        "strength": 17,
        "dexterity": 11,
        "constitution": 17,
        "intelligence": 20,
        "mind": 21
      },
      "stairway": {  // 命定之人的登神长阶
        "isOpen": true,  // 是否开启登神长阶 (true/false)
        "elements": {  // 登神长阶的要素（嵌套键值对格式：{ "要素名": { "效果名": "效果描述" } }）
          "光明": {
            "光明属性": "所有攻击都附带光明属性，对黑暗与亡灵生物造成额外20%的伤害"
          },
          "秩序": {
            "秩序护持": "免疫所有混乱与精神控制效果。施加的增益或减益效果持续时间延长1回合"
          },
          "神圣": {
            "神圣庇护": "受到的所有伤害降低15%"
          }
        },
        "powers": {  // 登神长阶的权能（嵌套键值对格式：{ "权能名": { "效果名": "效果描述" } }）
          "圣域权能": {
            "辉煌圣域": "将现实侵染为神国的一角，在此，光明永恒，而黑暗将无时无刻不被灼烧。该权能每次使用会消耗25%的最大MP与SP。使用后将创造一个覆盖整个战场的【辉煌圣域】，持续到战斗结束。在圣域中，所有友方单位每回合恢复10%最大生命值，所有敌方单位每回合受到等同于索拉莉娅精神属性x100的能量伤害"
          }
        },
        "laws": {  // 登神长阶的法则（嵌套键值对格式：{ "法则名": { "效果名": "效果描述" } }）
          "秩序法则": {
            "战场法则": "${法则描述}。该法则主动使用会消耗50%的最大MP与SP。主动效果为设定一条战场法则，例如'禁止使用任何位移技能'或'所有治疗效果转化为伤害'。该法则持续3回合，无法被抵抗或驱散。每场战斗限用一次。被动效果为所有随机性效果（如概率触发、伤害浮动）在索拉莉娅面前都将被强制取最优结果（如必定触发、取最大伤害值）"
          }
        },
        "godlyRank": "秩序铁律",  // 登神长阶的神位
        "godKingdom": {  // 登神长阶的神国
          "name": "辉煌天国",
          "description": "以辉煌女神的神力开辟的专属次位面。一个由纯粹的光与秩序构成的世界，没有黑夜与混乱。在神国内，索拉莉娅全知全能，可以随意修改物理与魔法规则"
        }
      },
      "isContract": true,  // 命定之人是否与<user>缔结契约 (true/false)
      "affinity": 50,        // 命定之人的好感度
      "comment": "${对<user>的评价}",  // 命定之人对<user>的评价
      "backgroundInfo": "（命定之人的背景故事）",
      "skills": [  // 命定之人的技能（参考技能数据，但没有 cost 字段）
        {
          "name": "圣枪・天穹穿刺",
          "rarity": "mythic",
          "type": "主动",
          "consume": "20000SP",
          "tag": ["力量", "单体", "伤害", "威力: 7500"],  // 标签数组
          "effect": {  // 效果对象
            "天穹穿刺": "对单一目标造成7500点伤害，80%能量伤害，20%真实伤害。此攻击无视目标的护盾与伤害减免效果，且无法被闪避或格挡"
          },
          "description": "汇集神力于枪尖，投出划破天际的审判之光，此为神罚的具现，无可阻挡"
        }
        // 更多技能...
      ]
    }
  ]
}
```

### 核心分类数据 (coreClassification.json)

核心分类数据用于定义核心的分组和排行榜信息。每个分类作为一个 Tab 显示，核心可以同时属于多个分类。

```json5
{
  // 分类名称作为键，值是该分类下的核心列表
  "大杯": {
    // 核心名称（不含"命定系统-"前缀和作者括号）
    "A核心": {
      "note": "这是一个很棒的核心", // 核心的备注说明（可选）
    },
  },
}
```

**字段说明：**

- 最外层的键（如 `"大杯"`）：分类名称，会作为 Tab 标签显示
- 第二层的键（如 `"B核心"`）：核心名称，需要与世界书中的核心名称对应（不含 `命定系统-`
  前缀和末尾作者括号）
- `note`：（可选）核心的备注说明，会显示在核心按钮下方

**特殊分类：**

- `特别推荐`：固定在第一位的 Tab，用于硬编码的推荐核心（在代码中配置）
- `这是什么杯`：未分类核心的默认分组，固定在最后一位

## 注意事项

1. JSON5 格式提示
   - 字符串可以用单引号 `'` 或双引号 `"`
   - 数字不需要引号
   - 最后一个属性后的逗号可有可无
   - 中文标点符号要用英文标点
   - 可以自由添加注释说明数据用途

2. 装备/道具/技能必填字段
   - `name`：名称（不能为空）
   - `cost`：消耗的转生点数（数字）
   - `type`：类型
   - `rarity`：品质
   - `tag`: 标签数组（如 `["标签1", "标签2"]`）
   - `effect`：效果对象（如 `{"效果名": "效果描述"}`）
   - `description`：描述

3. 特殊字段
   - 技能数据需要额外的 `consume` 字段（消耗说明）
   - 道具数据需要额外的 `quantity` 字段（数量，默认为1）

4. 基础信息字段 (baseInfo.json)
   - `genders`：性别选项数组
   - `raceCosts`：种族消耗点数对象（正数扣点，负数加点）
   - `identityCosts`：身份消耗点数对象
   - `startLocations`：初始地点数组

5. 分类名称
   - 装备：武器、防具、饰品等
   - 道具：消耗品、材料等
   - 技能：战技、法术、祷告、其它等

## 常见问题

**Q: 为什么我的数据没有生效？**
A: 请确保：

1. 文件已成功提交到 GitHub 仓库
2. 联系技术人员更新版本号

**Q: 可以在 JSON 文件里写注释吗？**
A: 可以。本项目使用 JSON5 格式，完全支持注释。使用 `//` 写单行注释，使用 `/* */` 写多行注释。

**Q: 最后一个属性后面的逗号要不要删除？**
A: 不需要。JSON5 支持尾随逗号，保留或删除都可以。

**Q: 如何添加新的分类？**
A: 在对应文件中按照现有格式添加新的分类名称和数据即可。建议添加注释说明分类用途。

如有其他问题，请联系技术人员。
